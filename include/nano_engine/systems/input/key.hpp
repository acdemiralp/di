#ifndef NANO_ENGINE_SYSTEMS_INPUT_KEY_HPP_
#define NANO_ENGINE_SYSTEMS_INPUT_KEY_HPP_

#include <string>

#include <SDL2/SDL_keyboard.h>

#include <nano_engine/utility/bitset_enum.hpp>

namespace ne
{
enum class scan_code
{
  unknown                       = 0,
  a                             = 4,
  b                             = 5,
  c                             = 6,
  d                             = 7,
  e                             = 8,
  f                             = 9,
  g                             = 10,
  h                             = 11,
  i                             = 12,
  j                             = 13,
  k                             = 14,
  l                             = 15,
  m                             = 16,
  n                             = 17,
  o                             = 18,
  p                             = 19,
  q                             = 20,
  r                             = 21,
  s                             = 22,
  t                             = 23,
  u                             = 24,
  v                             = 25,
  w                             = 26,
  x                             = 27,
  y                             = 28,
  z                             = 29,
  _1                            = 30,
  _2                            = 31,
  _3                            = 32,
  _4                            = 33,
  _5                            = 34,
  _6                            = 35,
  _7                            = 36,
  _8                            = 37,
  _9                            = 38,
  _0                            = 39,
  enter                         = 40,
  escape                        = 41,
  backspace                     = 42,
  tab                           = 43,
  space                         = 44,
  minus                         = 45,
  equals                        = 46,
  left_bracket                  = 47,
  right_bracket                 = 48,
  backslash                     = 49,
  non_us_hash                   = 50,
  semicolon                     = 51,
  apostrophe                    = 52,
  grave                         = 53,
  comma                         = 54,
  period                        = 55,
  slash                         = 56,
  caps_lock                     = 57,
  f1                            = 58,
  f2                            = 59,
  f3                            = 60,
  f4                            = 61,
  f5                            = 62,
  f6                            = 63,
  f7                            = 64,
  f8                            = 65,
  f9                            = 66,
  f10                           = 67,
  f11                           = 68,
  f12                           = 69,
  print_screen                  = 70,
  scroll_lock                   = 71,
  pause                         = 72,
  insert                        = 73,
  home                          = 74,
  page_up                       = 75,
  del                           = 76,
  end                           = 77,
  page_down                     = 78,
  right                         = 79,
  left                          = 80,
  down                          = 81,
  up                            = 82,
  num_lock_clear                = 83,
  keypad_divide                 = 84,
  keypad_multiply               = 85,
  keypad_minus                  = 86,
  keypad_plus                   = 87,
  keypad_enter                  = 88,
  keypad_1                      = 89,
  keypad_2                      = 90,
  keypad_3                      = 91,
  keypad_4                      = 92,
  keypad_5                      = 93,
  keypad_6                      = 94,
  keypad_7                      = 95,
  keypad_8                      = 96,
  keypad_9                      = 97,
  keypad_0                      = 98,
  keypad_period                 = 99,
  non_us_backslash              = 100,
  application                   = 101,
  power                         = 102,
  keypad_equals                 = 103,
  f13                           = 104,
  f14                           = 105,
  f15                           = 106,
  f16                           = 107,
  f17                           = 108,
  f18                           = 109,
  f19                           = 110,
  f20                           = 111,
  f21                           = 112,
  f22                           = 113,
  f23                           = 114,
  f24                           = 115,
  execute                       = 116,
  help                          = 117,
  menu                          = 118,
  select                        = 119,
  stop                          = 120,
  again                         = 121,
  undo                          = 122,
  cut                           = 123,
  copy                          = 124,
  paste                         = 125,
  find                          = 126,
  mute                          = 127,
  volume_up                     = 128,
  volume_down                   = 129,
  keypad_comma                  = 133,
  keypad_equals_as_400          = 134,
  international_1               = 135,
  international_2               = 136,
  international_3               = 137,
  international_4               = 138,
  international_5               = 139,
  international_6               = 140,
  international_7               = 141,
  international_8               = 142,
  international_9               = 143,
  language_1                    = 144,
  language_2                    = 145,
  language_3                    = 146,
  language_4                    = 147,
  language_5                    = 148,
  language_6                    = 149,
  language_7                    = 150,
  language_8                    = 151,
  language_9                    = 152,
  alt_erase                     = 153,
  sys_req                       = 154,
  cancel                        = 155,
  clear                         = 156,
  prior                         = 157,
  return_2                      = 158,
  separator                     = 159,
  out                           = 160,
  oper                          = 161,
  clear_again                   = 162,
  cr_select                     = 163,
  ex_select                     = 164,
  keypad_00                     = 176,
  keypad_000                    = 177,
  thousands_separator           = 178,
  decimal_separator             = 179,
  currency_unit                 = 180,
  currency_subunit              = 181,
  keypad_left_parenthesis       = 182,
  keypad_right_parenthesis      = 183,
  keypad_left_brace             = 184,
  keypad_right_brace            = 185,
  keypad_tab                    = 186,
  keypad_backspace              = 187,
  keypad_a                      = 188,
  keypad_b                      = 189,
  keypad_c                      = 190,
  keypad_d                      = 191,
  keypad_e                      = 192,
  keypad_f                      = 193,
  keypad_xor                    = 194,
  keypad_power                  = 195,
  keypad_percent                = 196,
  keypad_less                   = 197,
  keypad_greater                = 198,
  keypad_ampersand              = 199,
  keypad_double_ampersand       = 200,
  keypad_vertical_bar           = 201,
  keypad_double_vertical_bar    = 202,
  keypad_colon                  = 203,
  keypad_hash                   = 204,
  keypad_space                  = 205,
  keypad_at                     = 206,
  keypad_exclamation            = 207,
  keypad_memory_store           = 208,
  keypad_memory_recall          = 209,
  keypad_memory_clear           = 210,
  keypad_memory_add             = 211,
  keypad_memory_subtract        = 212,
  keypad_memory_multiply        = 213,
  keypad_memory_divide          = 214,
  keypad_plus_minus             = 215,
  keypad_clear                  = 216,
  keypad_clear_entry            = 217,
  keypad_binary                 = 218,
  keypad_octal                  = 219,
  keypad_decimal                = 220,
  keypad_hexadecimal            = 221,
  left_ctrl                     = 224,
  left_shift                    = 225,
  left_alt                      = 226,
  left_gui                      = 227,
  right_ctrl                    = 228,
  right_shift                   = 229,
  right_alt                     = 230,
  right_gui                     = 231,
  mode                          = 257,
  audio_next                    = 258,
  audio_previous                = 259,
  audio_stop                    = 260,
  audio_play                    = 261,
  audio_mute                    = 262,
  media_select                  = 263,
  www                           = 264,
  mail                          = 265,
  calculator                    = 266,
  computer                      = 267,
  application_control_search    = 268,
  application_control_home      = 269,
  application_control_back      = 270,
  application_control_forward   = 271,
  application_control_stop      = 272,
  application_control_refresh   = 273,
  application_control_bookmarks = 274,
  brightness_down               = 275,
  brightness_up                 = 276,
  display_switch                = 277,
  keyboard_illumination_toggle  = 278,
  keyboard_illumination_down    = 279,
  keyboard_illumination_up      = 280,
  eject                         = 281,
  sleep                         = 282,
  application_1                 = 283,
  application_2                 = 284,
  num_scancodes                 = 512
};
enum class key_code
{
  unknown                       = 0,
  enter                         = '\r',
  escape                        = '\033',
  backspace                     = '\b',
  tab                           = '\t',
  space                         = ' ',
  exclamation                   = '!',
  double_quote                  = '"',
  hash                          = '#',
  percent                       = '%',
  dollar                        = '$',
  ampersand                     = '&',
  quote                         = '\'',
  left_paranthesis              = '(',
  right_paranthesis             = ')',
  asterisk                      = '*',
  plus                          = '+',
  comma                         = ',',
  minus                         = '-',
  period                        = '.',
  slash                         = '/',
  _0                            = '0',
  _1                            = '1',
  _2                            = '2',
  _3                            = '3',
  _4                            = '4',
  _5                            = '5',
  _6                            = '6',
  _7                            = '7',
  _8                            = '8',
  _9                            = '9',
  colon                         = ':',
  semicolon                     = ';',
  less                          = '<',
  equals                        = '=',
  greater                       = '>',
  question                      = '?',
  at                            = '@',
  left_bracket                  = '[',
  backslash                     = '\\',
  right_bracket                 = ']',
  caret                         = '^',
  underscore                    = '_',
  backquote                     = '`',
  a                             = 'a',
  b                             = 'b',
  c                             = 'c',
  d                             = 'd',
  e                             = 'e',
  f                             = 'f',
  g                             = 'g',
  h                             = 'h',
  i                             = 'i',
  j                             = 'j',
  k                             = 'k',
  l                             = 'l',
  m                             = 'm',
  n                             = 'n',
  o                             = 'o',
  p                             = 'p',
  q                             = 'q',
  r                             = 'r',
  s                             = 's',
  t                             = 't',
  u                             = 'u',
  v                             = 'v',
  w                             = 'w',
  x                             = 'x',
  y                             = 'y',
  z                             = 'z',
  caps_lock                     = SDLK_CAPSLOCK,
  f1                            = SDLK_F1,
  f2                            = SDLK_F2,
  f3                            = SDLK_F3,
  f4                            = SDLK_F4,
  f5                            = SDLK_F5,
  f6                            = SDLK_F6,
  f7                            = SDLK_F7,
  f8                            = SDLK_F8,
  f9                            = SDLK_F9,
  f10                           = SDLK_F10,
  f11                           = SDLK_F11,
  f12                           = SDLK_F12,
  print_screen                  = SDLK_PRINTSCREEN,
  scroll_lock                   = SDLK_SCROLLLOCK,
  pause                         = SDLK_PAUSE,
  insert                        = SDLK_INSERT,
  home                          = SDLK_HOME,
  page_up                       = SDLK_PAGEUP,
  del                           = '\177',
  end                           = SDLK_END,
  page_down                     = SDLK_PAGEDOWN,
  right                         = SDLK_RIGHT,
  left                          = SDLK_LEFT,
  down                          = SDLK_DOWN,
  up                            = SDLK_UP,
  num_lock_clear                = SDLK_NUMLOCKCLEAR,
  keypad_divide                 = SDLK_KP_DIVIDE,
  keypad_multiply               = SDLK_KP_MULTIPLY,
  keypad_minus                  = SDLK_KP_MINUS,
  keypad_plus                   = SDLK_KP_PLUS,
  keypad_enter                  = SDLK_KP_ENTER,
  keypad_1                      = SDLK_KP_1,
  keypad_2                      = SDLK_KP_2,
  keypad_3                      = SDLK_KP_3,
  keypad_4                      = SDLK_KP_4,
  keypad_5                      = SDLK_KP_5,
  keypad_6                      = SDLK_KP_6,
  keypad_7                      = SDLK_KP_7,
  keypad_8                      = SDLK_KP_8,
  keypad_9                      = SDLK_KP_9,
  keypad_0                      = SDLK_KP_0,
  keypad_period                 = SDLK_KP_PERIOD,
  application                   = SDLK_APPLICATION,
  power                         = SDLK_POWER,
  keypad_equals                 = SDLK_KP_EQUALS,
  f13                           = SDLK_F13,
  f14                           = SDLK_F14,
  f15                           = SDLK_F15,
  f16                           = SDLK_F16,
  f17                           = SDLK_F17,
  f18                           = SDLK_F18,
  f19                           = SDLK_F19,
  f20                           = SDLK_F20,
  f21                           = SDLK_F21,
  f22                           = SDLK_F22,
  f23                           = SDLK_F23,
  f24                           = SDLK_F24,
  execute                       = SDLK_EXECUTE,
  help                          = SDLK_HELP,     
  menu                          = SDLK_MENU,
  select                        = SDLK_SELECT,
  stop                          = SDLK_STOP,
  again                         = SDLK_AGAIN,
  undo                          = SDLK_UNDO,
  cut                           = SDLK_CUT,
  copy                          = SDLK_COPY,
  paste                         = SDLK_PASTE,
  find                          = SDLK_FIND,
  mute                          = SDLK_MUTE,
  volume_up                     = SDLK_VOLUMEUP,
  volume_down                   = SDLK_VOLUMEDOWN,
  keypad_comma                  = SDLK_KP_COMMA,
  keypad_equals_as_400          = SDLK_KP_EQUALSAS400,
  alt_erase                     = SDLK_ALTERASE,
  sys_req                       = SDLK_SYSREQ,
  cancel                        = SDLK_CANCEL,
  clear                         = SDLK_CLEAR,
  prior                         = SDLK_PRIOR,
  return_2                      = SDLK_RETURN2,
  separator                     = SDLK_SEPARATOR,
  out                           = SDLK_OUT,
  oper                          = SDLK_OPER,
  clear_again                   = SDLK_CLEARAGAIN,
  cr_select                     = SDLK_CRSEL,
  ex_select                     = SDLK_EXSEL,
  keypad_00                     = SDLK_KP_00,
  keypad_000                    = SDLK_KP_000,
  thousands_separator           = SDLK_THOUSANDSSEPARATOR,
  decimal_separator             = SDLK_DECIMALSEPARATOR,
  currency_unit                 = SDLK_CURRENCYUNIT,
  currency_subunit              = SDLK_CURRENCYSUBUNIT,
  keypad_left_parenthesis       = SDLK_KP_LEFTPAREN,
  keypad_right_parenthesis      = SDLK_KP_RIGHTPAREN,
  keypad_left_brace             = SDLK_KP_LEFTBRACE,
  keypad_right_brace            = SDLK_KP_RIGHTBRACE,
  keypad_tab                    = SDLK_KP_TAB,
  keypad_backspace              = SDLK_KP_BACKSPACE,
  keypad_a                      = SDLK_KP_A,
  keypad_b                      = SDLK_KP_B,
  keypad_c                      = SDLK_KP_C,
  keypad_d                      = SDLK_KP_D,
  keypad_e                      = SDLK_KP_E,
  keypad_f                      = SDLK_KP_F,
  keypad_xor                    = SDLK_KP_XOR,
  keypad_power                  = SDLK_KP_POWER,
  keypad_percent                = SDLK_KP_PERCENT,
  keypad_less                   = SDLK_KP_LESS,
  keypad_greater                = SDLK_KP_GREATER,
  keypad_ampersand              = SDLK_KP_AMPERSAND,
  keypad_double_ampersand       = SDLK_KP_DBLAMPERSAND,
  keypad_vertical_bar           = SDLK_KP_VERTICALBAR,
  keypad_double_vertical_bar    = SDLK_KP_DBLVERTICALBAR,
  keypad_colon                  = SDLK_KP_COLON,
  keypad_hash                   = SDLK_KP_HASH,
  keypad_space                  = SDLK_KP_SPACE,
  keypad_at                     = SDLK_KP_AT,
  keypad_exclamation            = SDLK_KP_EXCLAM,
  keypad_memory_store           = SDLK_KP_MEMSTORE,
  keypad_memory_recall          = SDLK_KP_MEMRECALL,
  keypad_memory_clear           = SDLK_KP_MEMCLEAR,
  keypad_memory_add             = SDLK_KP_MEMADD,
  keypad_memory_subtract        = SDLK_KP_MEMSUBTRACT,
  keypad_memory_multiply        = SDLK_KP_MEMMULTIPLY,
  keypad_memory_divide          = SDLK_KP_MEMDIVIDE,
  keypad_plus_minus             = SDLK_KP_PLUSMINUS,
  keypad_clear                  = SDLK_KP_CLEAR,
  keypad_clear_entry            = SDLK_KP_CLEARENTRY,
  keypad_binary                 = SDLK_KP_BINARY,
  keypad_octal                  = SDLK_KP_OCTAL,
  keypad_decimal                = SDLK_KP_DECIMAL,
  keypad_hexadecimal            = SDLK_KP_HEXADECIMAL,
  left_ctrl                     = SDLK_LCTRL,
  left_shift                    = SDLK_LSHIFT,
  left_alt                      = SDLK_LALT,
  left_gui                      = SDLK_LGUI,
  right_ctrl                    = SDLK_RCTRL,
  right_shift                   = SDLK_RSHIFT,
  right_alt                     = SDLK_RALT,
  right_gui                     = SDLK_RGUI,
  mode                          = SDLK_MODE,
  audio_next                    = SDLK_AUDIONEXT,
  audio_prev                    = SDLK_AUDIOPREV,
  audio_stop                    = SDLK_AUDIOSTOP,
  audio_play                    = SDLK_AUDIOPLAY,
  audio_mute                    = SDLK_AUDIOMUTE,
  media_select                  = SDLK_MEDIASELECT,
  www                           = SDLK_WWW,
  mail                          = SDLK_MAIL,
  calculator                    = SDLK_CALCULATOR,
  computer                      = SDLK_COMPUTER,
  application_control_search    = SDLK_AC_SEARCH,
  application_control_home      = SDLK_AC_HOME,
  application_control_back      = SDLK_AC_BACK,
  application_control_forward   = SDLK_AC_FORWARD,
  application_control_stop      = SDLK_AC_STOP,
  application_control_refresh   = SDLK_AC_REFRESH,
  application_control_bookmark  = SDLK_AC_BOOKMARKS,
  brightness_down               = SDLK_BRIGHTNESSDOWN,
  brightness_up                 = SDLK_BRIGHTNESSUP,
  display_switch                = SDLK_DISPLAYSWITCH,
  keyboard_illumination_toggle  = SDLK_KBDILLUMTOGGLE,
  keyboard_illumination_down    = SDLK_KBDILLUMDOWN,
  keyboard_illumination_up      = SDLK_KBDILLUMUP,
  eject                         = SDLK_EJECT,
  sleep                         = SDLK_SLEEP
};
enum class key_modifier
{
  none        = 0x0000,
  left_shift  = 0x0001,
  right_shift = 0x0002,
  left_ctrl   = 0x0040,
  right_ctrl  = 0x0080,
  left_alt    = 0x0100,
  right_alt   = 0x0200,
  left_gui    = 0x0400,
  right_gui   = 0x0800,
  num_lock    = 0x1000,
  caps_lock   = 0x2000,
  mode        = 0x4000,
  reserved    = 0x8000
};

template<>
struct is_bitset_enum<key_modifier>
{
  static const bool enable = true;
};

struct key
{
  key_code    key_code() const
  {
    return static_cast<ne::key_code>(SDL_GetKeyFromScancode(static_cast<SDL_Scancode>(scan_code)));
  }
  std::string name    () const
  {
    return std::string(SDL_GetScancodeName(static_cast<SDL_Scancode>(scan_code)));
  }

  scan_code    scan_code;
  key_modifier modifiers;
};

}

#endif
